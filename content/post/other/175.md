---
title: "Android Studioで新規プロジェクト作成時のテンプレートを作る"
slug: 175
date: 2015-01-10
lastmod: 2015-01-18
tags: 
---

<div id="wppda_alert">この記事は最終更新から3ヶ月以上が経過しています。情報が古い可能性があります。</div><p><a href="http://qiita.com/kgmyshin/items/9c803a21451e603531f0">【Android】もっと先へ「加速」したくはないか、少年 〜Project Template編〜</a>を見て、実際に自分でも試してみました。</p>
<p>パッケージ構成は<a href="https://github.com/futurice/android-best-practices">Best practices in Android development</a>の通りに再現することにしました。</p>
<p>パッケージ構成以外に、リソースファイルもテンプレートで追加させることができるので、color.xmlなどよく使うものがあれば追加してやると便利かもしれません。</p>
<p>AndroidStudio.appの中に直接作成したら、アップデートの際にどうなるか分からなかったので、Gitで別途管理することにしました。作成したテンプレートは<a href="https://github.com/gen0083/BlankActivityCustom">GitHub</a>で公開しています。</p>
<p><img src="https://android.gcreate.jp/wp-content/uploads/2015/01/5111c8c1a2325af98fd144ba1c1600b7.jpg" alt="カスタムテンプレート" title="カスタムテンプレート.jpg" border="0" width="600" height="423" /></p>
<h2>注意点</h2>
<p>テンプレートファイルを書き換えても、都度Android Studioを再起動させないと変更が反映されません。ちょっと変わった処理をしようと思うと、動作確認が面倒くさいです。</p>
<p>ディレクトリにファイルを置けばそれが反映されるわけではなく、<code>recipe.xml.ftl</code>で指定したファイルが作成されます。rootディレクトリ以下に作ったディレクトリが勝手に再現されるのかと思っていたら全然違いました。</p>
<h2>template.xml</h2>
<p>template.xmlはテンプレートファイルの名前や入力項目などを決めるファイルになっています。</p>
<p><code>&lt;parameter&gt;</code>タグを追加することで、入力項目を増やすことができます。</p>
<p>ちなみにこのテンプレートでは、<code>package-info.java</code>の<code>@author</code>を変更できるようにしてみました。</p>
<pre><code>&lt;parameter
    id="author"
    name="Author"
    type="string"
    default="Gen"
    help="This uses javadoc @autohr in package-info.java." /&gt;
</code></pre>
<p><img src="https://android.gcreate.jp/wp-content/uploads/2015/01/0b26594928b7fcd561cb4c5dd404ad68.jpg" alt="追加した入力項目" title="追加した入力項目.jpg" border="0" width="600" height="374" /></p>
<p>package-info.javaでは以下のようにして参照できました。idで指定した文字列で参照できるみたいです。</p>
<pre><code>/**
 * Activities.
 * @author ${author}
 */
package ${packageName}.activities;
</code></pre>
<p>参考</p>
<p><a href="http://www.i-programmer.info/projects/215-mobile/6843-custom-projects-in-android-studio.html">Custom Projects In Android Studio</a></p>
<h2>Android Studioのバージョンアップができない</h2>
<p>注意点として上記のテンプレートを追加すると、以下ののようなメッセージが表示されAndroid Studioのバージョンアップができません。</p>
<p><img src="https://android.gcreate.jp/wp-content/uploads/2015/01/48bfd861636b5e48faced29019587cb8.jpg" alt="バージョンアップする際のエラーメッセージ" title="バージョンアップする際のエラーメッセージ.jpg" border="0" width="597" height="393" /></p>
<p>そのため、バージョンアップする際には追加したテンプレートを手動で削除してやる必要があります。</p>
<p>バージョンアップすると追加したテンプレートは消されてしまうのではと思っていたのですが、そもそもバージョンアップ自体ができませんでした。</p>
<p>プロジェクトテンプレートを自分で追加する場合、テンプレートで得られるメリットと、バージョンアップ時に手動で消さなければならないというデメリットを天秤にかけてから行うようにしてください。</p>

  